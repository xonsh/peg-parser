# xonsh-parser

<p align="center">
    <em>Xonsh parser using CPython's PEGen grammar</em>
</p>

[![build](https://github.com/jnoortheen/xonsh-parser/workflows/Build/badge.svg)](https://github.com/jnoortheen/xonsh-parser/actions)
[![codecov](https://codecov.io/gh/jnoortheen/xonsh-parser/branch/master/graph/badge.svg)](https://codecov.io/gh/jnoortheen/xonsh-parser)
[![PyPI version](https://badge.fury.io/py/xonsh-parser.svg)](https://badge.fury.io/py/xonsh-parser)

---

**Documentation**: <a href="https://jnoortheen.github.io/xonsh-parser/" target="_blank">https://jnoortheen.github.io/xonsh-parser/</a>

**Source Code**: <a href="https://github.com/jnoortheen/xonsh-parser" target="_blank">https://github.com/jnoortheen/xonsh-parser</a>

---

## Development

### Setup environment

You can use any PEP-621 supported tools like [PDM](https://pdm-project.org/en/latest/), [Hatch](https://hatch.pypa.io/latest/install/) ... to manage the development environment and production build. We also use [pre-commit](https://pre-commit.com/) for linting the code.

```sh
# setup linters,formatters etc.,
pre-commit install

# install development deps
pip install -e ".[dev,test,docs]"
```

### Workflow 

1. Explore the PEG grammar notations from the following pages  
 a. https://we-like-parsers.github.io/pegen/  
 b. https://devguide.python.org/internals/parser/
2. Edit the [xonsh.gram](./tasks/xonsh.gram) while adding any new actions to [subheader.py](./peg_parser/subheader.py)
3. Test the new changes with `task test` as the [parser.py](./peg_parser/parser.py) will get autogenerated
4. You can force regeneration with `task generate -f`

### Managing development tasks

We use [Taskfile](https://taskfile.dev/usage/) to manage development tasks. 
```bash
task test

# to watch for changes and run tests
task test --watch -- -x --ff

# release a new version
task release
```

## License

This project is licensed under the terms of the MIT license.

## Credits

- Thanks to [pegen](https://github.com/we-like-parsers/pegen) project for the Python version of the `CPython's` PEG parser
- Thanks to [intellij-pegen-plugin](https://github.com/vpoverennov/pegen-plugin)
